<xmp>
    <div partMain ref="panel" class="full">
        <div ref='tabs' style="padding-top:5px;">
            <get name="tabsItem">
                <div tabitem style="border:1px #808080 solid;border-bottom:0px;display: inline-block;padding:5px 10px 0;cursor:pointer;-webkit-border-top-left-radius:5px;-webkit-border-top-right-radius:5px;border-top-left-radius:5px;border-top-right-radius:5px;"></div>
            </get>
        </div>
        <div ref='content' style="width:100%;" class="shadowless">
            
        </div>
    </div>
    <script>
        var content=part.content=$t.refs.content.pop();
        var tabs=part.tabs=$t.refs.tabs.pop();
        var panel=part.panel=$t.refs.panel.pop();
        var tabsItem=$t.getNode.tabsItem.children[0];
        delete $t.getNode.tabsItem;
        var tabItems=[];
        part.onresize=function(){
            content.style.height=panel.offsetHeight-tabs.offsetHeight+'px';
        }
        // part.oninsert=function(){
            // part.emitResize();
        // }
        
        part.addItem=function addItem(name){
            if(!name){
                return ;
            }
            var elem=document.createElement('div');
            elem.setAttribute('tabname',name);
            var tabItem=tabsItem.cloneNode();
            tabItem.innerHTML=name;
            tabs.appendChild(tabItem);
            content.appendChild(elem);
            tabItems.push([tabItem,elem]);
            elem.style.display="none";
            tabItem.style.backgroundColor="rgba(0,0,0,0.1)";
        }
        for(var i=0;i<outer.length;i++){
            var elem=outer[i];
            if(elem.nodeType===1){
                var name=$t.getAttr(elem,'tabname',null);
                if(name){
                    var tabItem=tabsItem.cloneNode();
                    tabItem.innerHTML=name;
                    tabs.appendChild(tabItem);
                    content.appendChild(elem);
                    tabItems.push([tabItem,elem]);
                    elem.style.display="none";
                    tabItem.style.backgroundColor="rgba(0,0,0,0.1)";
                }
            }else if(elem.nodeType===8){
                content.appendChild(elem);
            }
        }
        part.check=function(idx){
            part.checkElem(tabItems[idx][0]);
        }
        part.checkElem=function(t){
            for(var i=0;i<tabItems.length;i++){
                if(tabItems[i][0]===t){
                    tabItems[i][1].style.display='';
                    tabItems[i][0].style.backgroundColor="";
                }else{
                    tabItems[i][1].style.display='none';
                    tabItems[i][0].style.backgroundColor="rgba(0,0,0,0.1)";
                }
            }
            part.emitResize();
        }
        if(tabItems.length>0){
            part.checkElem(tabItems[0][0]);
        }else{
            part.addItem('default');
            part.checkElem(tabItems[0][0]);
        }
        tabs.onclick=function(e){
            var t=e.target;
            if(t.hasAttribute('tabitem')){
                part.checkElem(t);
            };
        }
        $t.initHTML(content.children,null,null,null,part);
        part.emitResize();
    </script>
</xmp>