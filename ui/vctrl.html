<xmp>
    <!elements>
    <!! part.$.init(part,{nopersent!false!true}.bool,{minwidth!1}.int);>
</xmp>
<script xmp ui='vctrl' service='init'>
    (function(){
        function setWidth(part,noPersent,minWidth){
            var nodes=part.elements;
            var style;
            var width=part.elemParent.offsetWidth;
            var persentWidth=0;
            var elems=[];
            var styleWidth;
            for(var i=0;i<nodes.length;i++){
                if(nodes[i].nodeType===1){
                    if(!noPersent){
                        styleWidth=nodes[i].style.width;
                        if($t.isPersent(styleWidth)){
                            persentWidth+=$t.persentToFloat(styleWidth);
                        }else{
                            elems.push(nodes[i]);
                        }
                    }else{
                        elems.push(nodes[i]);
                    }
                }
            }
            if(!noPersent&&persentWidth>0){
                width=width*(1-persentWidth);
            }
            var col=parseInt(width/minWidth);
            if(col>elems.length){
                col=elems.length;
            }else if(col===0){
                col=1;
            }
            width=width/col;
            if(width<minWidth){
                width=minWidth;
            }
            for(var i=0;i<elems.length;i++){
                style=elems[i].style;
                style.display='inline-block';
                style.boxSizing='border-box';
                style.verticalAlign='top';
                style.width=width+"px";
            }
        }
        return function(part,noPersent,minWidth){
            part.onresize=function(v){
                if(part.isInsert){
                    setWidth(part,noPersent,minWidth);
                }
            }
            $t.readyByRenderDocument.on(part.onresize);
        }
    })()
</script>